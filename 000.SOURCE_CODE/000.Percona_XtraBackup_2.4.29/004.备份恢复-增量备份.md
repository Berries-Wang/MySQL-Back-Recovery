# 增量备份
Both the xtrabackup tool and the innobackupex tool support incremental backups. An incremental backup backs up only data that has changed since the last backup.

You can take multiple incremental backups between each full backup. For example, you can take a full backup once a week and an incremental backup every day, or a full backup every day and incremental backups each hour.(您可以在每次完整备份之间进行多个增量备份。例如，每周进行一次全量备份，每天进行一次增量备份，或者每天进行一次全量备份，每小时进行一次增量备份。)

Incremental backups work because each InnoDB page contains a log sequence number (LSN). The LSN is the system version number for the entire database. Each page’s LSN shows how recently it was changed.

An incremental backup copies each page whose LSN is newer than the previous incremental or full backup’s LSN. There are two algorithms in use to find the set of such pages to be copied. The first one, available with all the server types and versions, checks the page LSN directly by reading all the data pages. The second one, available with Percona Server for MySQL, enables the changed page tracking feature on the server, which will note the pages as they are being changed. This information will be then written out in a compact separate so-called bitmap file. The xtrabackup binary uses that file to read only the data pages it needs for the incremental backup. This features potentially saves many read requests. The latter algorithm is enabled by default if the xtrabackup binary finds the bitmap file. It is possible to specify xtrabackup --incremental-force-scan to read all the pages even if the bitmap data is available.(增量备份复制LSN比前一个增量备份或完整备份的LSN更新的每个页面。有两种算法用于查找要复制的页面集。第一种方法适用于所有服务器类型和版本，它通过读取所有数据页直接检查页面LSN。第二个是Percona Server for MySQL，它启用了服务器上的更改页面跟踪功能，当页面被更改时，它会记录下来。然后，这些信息将被写入一个紧凑的单独的所谓位图文件中。xtrabackup二进制文件使用该文件仅读取增量备份所需的数据页。这个特性可能会节省很多读请求。如果xtrabackup二进制文件找到位图文件，则默认启用后一种算法。可以指定xtrabackup—incremental-force-scan来读取所有页面，即使位图数据可用。)

```txt
   !!! Important 
   Incremental backups do not compare the data files to the previous backup’s data files. For this reason, running an incremental backup after a partial backup may lead to inconsistent data.（增量备份不会将数据文件与前一次备份的数据文件进行比较。因此，在进行部分备份后再进行增量备份，可能导致数据不一致。）
   
   Incremental backups read the pages and compare their LSN to the last backup’s LSN. You must have a full backup to recover the incremental changes. Without a full backup to act as a base, the incremental backups are useless.(增量备份读取页面，并将它们的LSN与上次备份的LSN进行比较。必须有完整备份才能恢复增量更改。如果没有完整备份作为基础，增量备份就毫无用处。)
   
   You can use the --incremental-lsn option to perform an incremental backup without even having the previous backup, if you know its LSN.(您可以使用--incremental-lsn选项来执行增量备份，甚至不需要之前的备份，如果您知道它的LSN。)
```

